<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>노드 조작 예제</title>
</head>
<body>
  <div id="container">
    <p id="old">기존 문장</p>
  </div>

  <button id='myBtn'>클릭/더블클릭</button>
  <button onclick="removeNode()">노드 제거</button>
  <button onclick="replaceNode()">노드 교체</button>

  <script>
    const btn = document.getElementById('myBtn');
    let clickTimer = null;

    btn.addEventListener("dblclick", function() {
      clearTimeout(clickTimer); // 단일 클릭 실행 취소
      clickTimer = null;
      alert('더블클릭 ?');
    });

    btn.addEventListener("click", function () {
      // 클릭 후 일정 시간 기다려서 더블클릭 여부 확인
      if (clickTimer) return;

      clickTimer = setTimeout(() => {
        alert("클릭 알림!");
        addNode();
        replaceNode();
        clickTimer = null;
      }, 250); // 250ms 안에 두 번째 클릭이 들어오면 dblclick으로 판단됨
    });

    function addNode() {
      const newElement = document.createElement("p");         // <p> 요소 생성
      newElement.textContent = "추가된 문장";                 // 텍스트 설정
      newElement.id = "new";                               // id 설정
      newElement.style.color = "blue";                        // 스타일 설정
      document.getElementById("container").appendChild(newElement); // 추가
    }

    function removeNode() {
      const container = document.getElementById("container");
      const target = document.getElementById("new");
      if (target) {
        container.removeChild(target);  // target 요소 제거
      }
    }

    function replaceNode() {
      const container = document.getElementById("container");
      const oldNode = document.getElementById("old");

      const newNode = document.createElement("h3");
      newNode.id = "old"; // 새 노드에 동일한 id 설정
      newNode.textContent = "새로운 노드로 교체됨";

      if (oldNode) {
        container.replaceChild(newNode, oldNode); // target → h3로 교체
      }
    }
  </script>
</body>
</html>
