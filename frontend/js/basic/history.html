<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>History API ë°ëª¨</title>
  <style>
    button { margin: 5px; padding: 10px; }
    #output { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>ğŸ“œ History API ì˜ˆì œ</h2>

  <button onclick="goToPage('home')">home</button>
  <button onclick="goToPage('about')">about</button>
  <button onclick="goToPage('contact')">contact</button>
  <button onclick="replaceToPage('replace')">replace</button>

  <button onclick="history.back()">â¬… ì´ì „</button>
  <button onclick="history.forward()">â¡ ë‹¤ìŒ</button>

  <div id="output">í˜„ì¬ í˜ì´ì§€: home</div>

  <script>
    const output = document.getElementById("output");

    function goToPage(page) {
      // URL ê²½ë¡œë¥¼ ë°”ê¾¸ë©´ì„œ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì— ìƒíƒœ ì €ì¥
      history.pushState({ page: page }, "", `?page=${page}`);
      updatePage(page);
    }

    function replaceToPage(page) {
      // í˜„ì¬ ìƒíƒœë¥¼ ëŒ€ì²´í•˜ë©´ì„œ URL ê²½ë¡œë¥¼ ë°”ê¿ˆ
      history.replaceState({ page: page }, "", `?page=${page}`);
      updatePage(page);
    }

    function updatePage(page) {
      output.textContent = "í˜„ì¬ í˜ì´ì§€: " + page;
    }

    // ë’¤ë¡œê°€ê¸°, ì•ìœ¼ë¡œê°€ê¸° í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
    // popstate ì´ë²¤íŠ¸ëŠ” íˆìŠ¤í† ë¦¬ ìŠ¤íƒì˜ ìƒíƒœê°€ ë³€ê²½ë  ë•Œ ë°œìƒ
    window.addEventListener("popstate", function (event) {
      const page = event.state?.page || "home";
      updatePage(page);
    });

    // ì´ˆê¸° ë¡œë”© ì‹œ URLì— ë”°ë¼ í‘œì‹œ (ìƒˆë¡œê³ ì¹¨ ëŒ€ë¹„)
    // DOMContentLoaded ì´ë²¤íŠ¸ëŠ” HTML ë¬¸ì„œê°€ ì™„ì „íˆ ë¡œë“œëœ í›„ ì‹¤í–‰
    window.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(location.search);
      const page = params.get("page") || "home";
      updatePage(page);
    });
  </script>
</body>
</html>
